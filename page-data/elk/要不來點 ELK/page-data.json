{"componentChunkName":"component---src-templates-blog-post-js","path":"/elk/要不來點 ELK/","result":{"data":{"site":{"siteMetadata":{"title":"Andy Diary"}},"markdownRemark":{"id":"4929f0ba-b512-5743-b06d-35e6d058572b","excerpt":"什麼是 ELK ? ELK 是個縮寫，其描述由三個熱門專案所組成的堆疊，分別為 Elasticsearch、Logstash、Kibana，通常使用在彙總所有系統和服務的 Log 並且分析，也可建立系統監控架構，透過視覺化的呈現，讓我們可以快速了解系統狀況。 為何需要使用 ELK…","html":"<h2>什麼是 ELK ?</h2>\n<p>ELK 是個縮寫，其描述由三個熱門專案所組成的堆疊，分別為 Elasticsearch、Logstash、Kibana，通常使用在彙總所有系統和服務的 Log 並且分析，也可建立系統監控架構，透過視覺化的呈現，讓我們可以快速了解系統狀況。</p>\n<h2>為何需要使用 ELK ?</h2>\n<p>隨著越來越多的系統慢慢走向雲端、微服務，在 infra 角度，我們不可能在每一台主機進行 Log 檢視與錯誤排查，所以我們需要一個日誌管理與分析的平台，來讓我們監控基礎設施、服務日誌、系統流量等資訊，以達到故障診斷、快速排查相關系統問題。</p>\n<h2>要不要來點 ELK ?</h2>\n<p>接下來就讓我們以一個最基礎的 ELK 服務進行測試，我們先來讀讀架構圖。</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/fa91fc717686722f5ed45f03ceace1fe/ad997/ELK_%E6%9E%B6%E6%A7%8B%E5%9C%96.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABa0lEQVR42pWSXy8DURDF9/NKfAeP4lHihUh480BCBIkiEkEFTUhoqUrZ6pbdWrrd7u7995Nu2a6SiJvc3Jm5M+fec2as1UqX2bM3MJLRZYzhv8uqejGlZoRRgvcwpnDbxGDQWmeg/wG2qm1J2RWgBI7rsXJaIuiGCCEyoDzoqD0as1bLATPHburc1RusbexSb7RSXymVJQ83mBxI/vd92xrVTOl+kkQlHfJMM9MIMPE3mjLpZRnW0XWHycUTtJJIIRBSI8I2decSBcTdgPOxcZzCTloQ+Da2e5OWx3Ffe83xVRG30x4AVuyAw2IpfUFKlQavKjWmF5apPdiEYY/5iSmKewfp3fZ+kbmldV79t9R3PQ+79UzTaZEk8ZCyydHqdEMenxzCXoRUigfPx3sPBgBtn4bzjBC5MdNDbSxtvkbE/Dl75hdR7zfPqF/fYT81iKLoZ1O+Tp3rov5lbPSnv3Vb5aLl4L+4xEnCB59IA59QaWbAAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"ELK_架構圖\"\n        title=\"\"\n        src=\"/static/fa91fc717686722f5ed45f03ceace1fe/f058b/ELK_%E6%9E%B6%E6%A7%8B%E5%9C%96.png\"\n        srcset=\"/static/fa91fc717686722f5ed45f03ceace1fe/c26ae/ELK_%E6%9E%B6%E6%A7%8B%E5%9C%96.png 158w,\n/static/fa91fc717686722f5ed45f03ceace1fe/6bdcf/ELK_%E6%9E%B6%E6%A7%8B%E5%9C%96.png 315w,\n/static/fa91fc717686722f5ed45f03ceace1fe/f058b/ELK_%E6%9E%B6%E6%A7%8B%E5%9C%96.png 630w,\n/static/fa91fc717686722f5ed45f03ceace1fe/40601/ELK_%E6%9E%B6%E6%A7%8B%E5%9C%96.png 945w,\n/static/fa91fc717686722f5ed45f03ceace1fe/ad997/ELK_%E6%9E%B6%E6%A7%8B%E5%9C%96.png 1012w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>在這邊基本上大家可以注意 Shipper、Broker、Indexer 這三種類型，其工作分別為以下:</p>\n<h3>Shipper</h3>\n<ul>\n<li>Filebat: 主要負責搬運如 nginx、apache 等日誌。</li>\n<li>Logstash: 接收 Filebeat 來的日誌或者其他來源。</li>\n</ul>\n<h3>Broker</h3>\n<ul>\n<li>Redis: 緩存主要拿來防止 Logstash 故障問題，我們可以暫時儲存資料，直至 Logstash 恢復。</li>\n</ul>\n<h3>Indexer</h3>\n<ul>\n<li>Logstash: 在這邊我們將使用 Logstash 做一個過濾器，將消息切割成不同欄位，讓後續操作 Elasticsearch 時可以輕鬆的查詢。</li>\n</ul>\n<h2>結論</h2>\n<p>至此我們完成了 ELK 初步了解與規劃，後續文章我們將探討如何使用 Docker 完成 ELK 設施建構，有興趣的夥伴不妨可以停下腳步，跟我們一起實戰吧!</p>","frontmatter":{"title":"要不來點 ELK","date":"2023-02-26","description":null}},"previous":{"fields":{"slug":"/docker/Docker container 所造成的硬碟空間不足/"},"frontmatter":{"title":"Docker container 所造成的硬碟空間不足"}},"next":{"fields":{"slug":"/elk/要不要來點 ELK - Filebeat/"},"frontmatter":{"title":"要不來點 ELK - Filebeat"}}},"pageContext":{"id":"4929f0ba-b512-5743-b06d-35e6d058572b","previousPostId":"715b184e-a9d3-5250-afc1-56bc48d9c155","nextPostId":"994eb191-3614-526d-9a93-7ac54dcd4dee"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}