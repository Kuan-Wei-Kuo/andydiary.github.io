{"componentChunkName":"component---src-templates-blog-post-js","path":"/elk/要不要來點 ELK - Kibana/","result":{"data":{"site":{"siteMetadata":{"title":"Andy Diary"}},"markdownRemark":{"id":"2eaa1d4d-90a7-5a05-9b0f-9e8f9ae4c775","excerpt":"Git項目位置: https://github.com/Kuan-Wei-Kuo/elk-demo 什麼是 Kinaba ? Kinana 簡單的說就是一個視覺化工具，但其中還新增了許多與 Elasticsearch 進行設定的功能，來方便我們對 ES 進行操作。 出來吧 ! Kibana…","html":"<ul>\n<li>Git項目位置: <a href=\"https://github.com/Kuan-Wei-Kuo/elk-demo\">https://github.com/Kuan-Wei-Kuo/elk-demo</a></li>\n</ul>\n<h2>什麼是 Kinaba ?</h2>\n<p>Kinana 簡單的說就是一個視覺化工具，但其中還新增了許多與 Elasticsearch 進行設定的功能，來方便我們對 ES 進行操作。</p>\n<h2>出來吧 ! Kibana</h2>\n<p>話說在上一章節，我們已經將 Filebeat、ES、Logstash 啟動完畢，ES 中也開始存儲資料了，接下來就讓我們從 Kibana 上進行展示。</p>\n<h3>Edit yaml configuration</h3>\n<div class=\"gatsby-highlight\" data-language=\"yaml\"><pre class=\"language-yaml\"><code class=\"language-yaml\"><span class=\"token comment\">## kibana.yml</span>\r\n<span class=\"token key atrule\">server.host</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"0.0.0.0\"</span>\r\n<span class=\"token key atrule\">server.port</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"5601\"</span>\r\n<span class=\"token key atrule\">server.name</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"kibana\"</span>\r\n<span class=\"token key atrule\">elasticsearch.hosts</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"http://192.168.144.5:9200/\"</span><span class=\"token punctuation\">]</span>\r\n<span class=\"token key atrule\">xpack</span><span class=\"token punctuation\">:</span>\r\n  <span class=\"token key atrule\">apm.ui.enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\r\n  <span class=\"token key atrule\">graph.enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\r\n  <span class=\"token key atrule\">ml.enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\r\n  <span class=\"token key atrule\">monitoring.enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\r\n  <span class=\"token key atrule\">reporting.enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\r\n  <span class=\"token key atrule\">security.enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\r\n  <span class=\"token key atrule\">grokdebugger.enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span>\r\n  <span class=\"token key atrule\">searchprofiler.enabled</span><span class=\"token punctuation\">:</span> <span class=\"token boolean important\">false</span></code></pre></div>\n<h3>Run kibana</h3>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token function\">docker</span> run <span class=\"token parameter variable\">-d</span> <span class=\"token punctuation\">\\</span>\r\n<span class=\"token parameter variable\">-p</span> <span class=\"token number\">5601</span>:5601 <span class=\"token punctuation\">\\</span>\r\n<span class=\"token parameter variable\">-v</span> <span class=\"token environment constant\">$PWD</span>/kibana.yml:/usr/share/kibana/config/kibana.yml:ro <span class=\"token punctuation\">\\</span>\r\nkibana:7.17.9</code></pre></div>\n<h3>Find indices</h3>\n<p>接下來我們連接到 <a href=\"http://localohsot:5601\">http://localohsot:5601</a> 嘗試尋找我們的 traefik-log 位置。</p>\n<ol>\n<li>第一次進入 Kibana 時會出現 Start by adding integrations 建議，這邊我們選擇 Explore on my own。</li>\n<li>點選左上角的側拉選單，從選單中選擇 Stack management。</li>\n<li>進入 Management 後，我們選擇 Index Management。</li>\n<li>檢視是否有 traefik 相關 index，理論上我們會看到如檢核點中的畫面。</li>\n</ol>\n<h4>檢核點</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/121be8727977d772203ada97f302303a/69d6b/kibana_index_management.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 36.075949367088604%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAABJ0AAASdAHeZh94AAABBklEQVR42nWO3U7DMAyF8/4XSAhNCAQCia2ptpfiblubpl2yxnZcO6jpDRfwybKOreMfs7Pt43vz8Pz5tHt5ffuw7amxx8YebXvaH9qvvd0f2k38jkPTNvZogJeEJKohhsE57/0w+JRS+R+poaUY53yMMyJdfLgOY9d1zrm+70OMzo/TNPHCSyVnzhWinGktzNmFi5+R+J4AiBAJiRIgIsVEmFm1qGophZlxncuY+XKPE4I5X/tz5xJQAkAi0SKqi0jm7aBUPxOtjapzIvqeJo9oxvE2J8gsCdBF7AN2gWbMAPfNKiLrDhGqACIzl/qLGfx07QfAvL5KxIssoqKqW1pN+ici+gMac4Npe5QU4QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kibana_index_management\"\n        title=\"\"\n        src=\"/static/121be8727977d772203ada97f302303a/f058b/kibana_index_management.png\"\n        srcset=\"/static/121be8727977d772203ada97f302303a/c26ae/kibana_index_management.png 158w,\n/static/121be8727977d772203ada97f302303a/6bdcf/kibana_index_management.png 315w,\n/static/121be8727977d772203ada97f302303a/f058b/kibana_index_management.png 630w,\n/static/121be8727977d772203ada97f302303a/40601/kibana_index_management.png 945w,\n/static/121be8727977d772203ada97f302303a/78612/kibana_index_management.png 1260w,\n/static/121be8727977d772203ada97f302303a/69d6b/kibana_index_management.png 1912w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>Create index patterns</h3>\n<p>我們已經確定有資料了，接下來就是要建立 Index Pattern 方便讓 Kibana 進行使用。</p>\n<ol>\n<li>讓我們再度回到 Stack Management 中。</li>\n<li>選擇 Index Pattern，並且 Create index pattern。</li>\n<li>Name 輸入 traefik-log-*，這個 Pattern 就可以索取 Prefix 為 traefik-log 的 Index。</li>\n<li>Timestamp field 選擇 @timestamp。</li>\n<li>點選 Create index pattern。</li>\n</ol>\n<h4>檢核點</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/97da8f7d10d31cf0ac25b83740690c70/f33fc/kibana_index_pattern.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 43.0379746835443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAABJ0AAASdAHeZh94AAABQElEQVR42oWRTW7UQBCFfeYsSCQWJIsZg2ckENlwilwjm0hsuEIAazoTj93d9fvKyGORoGx4qkWpSlVfv+rmarO/eL9596G9vP50ddNt2t227br9l273uf24X2Pb7jbb7k18vf3WPBdSR6nUp2OfjqI6/08RMc/zlEszDCOxjUOfHh/Srx9E1d3tH6mamom52lp3d0TEacxNqSzqp1zSMKTUp0N6ejqO4yiizMLMIsKsk6CKibC7r/xcavP4s8+FcpWJzBy6EhyI2RGI+ZzHgkOIOhENhW/vD3fffze5kBpyLqUUxOJntQRARACYqgOVyNxzrarKIgOhf56aw+FYSWolYsbZzCpEqCoWaiDw2vi7fXl2GiZiLZWI2MxfhwEiBjBHOGCAA+q+tiJiuXY6kXmcJ+3Nl7zc5gWHM3OtsMgfiJHyr6WdDsIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kibana_index_pattern\"\n        title=\"\"\n        src=\"/static/97da8f7d10d31cf0ac25b83740690c70/f058b/kibana_index_pattern.png\"\n        srcset=\"/static/97da8f7d10d31cf0ac25b83740690c70/c26ae/kibana_index_pattern.png 158w,\n/static/97da8f7d10d31cf0ac25b83740690c70/6bdcf/kibana_index_pattern.png 315w,\n/static/97da8f7d10d31cf0ac25b83740690c70/f058b/kibana_index_pattern.png 630w,\n/static/97da8f7d10d31cf0ac25b83740690c70/40601/kibana_index_pattern.png 945w,\n/static/97da8f7d10d31cf0ac25b83740690c70/78612/kibana_index_pattern.png 1260w,\n/static/97da8f7d10d31cf0ac25b83740690c70/f33fc/kibana_index_pattern.png 1905w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3>Create dashboard</h3>\n<p>到最後，我們可以開始建立簡單的圖表資訊了，讓我們利用這個 index pattern 來建立吧 !</p>\n<ol>\n<li>點擊左上角的側拉選單，從選單中選擇 Dashboard。</li>\n<li>點擊 Create new dashboard 並且進入畫面。</li>\n<li>點擊左方的 Create visualization。</li>\n<li>使用以下表格輸入相關參數。</li>\n</ol>\n<table>\n<thead>\n<tr>\n<th>項目</th>\n<th>內容</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>Index pattern</td>\n<td>traefik-log-*</td>\n</tr>\n<tr>\n<td>Layer visualization type</td>\n<td>Area</td>\n</tr>\n<tr>\n<td>Horizontal axis</td>\n<td>@timestamp</td>\n</tr>\n<tr>\n<td>Vertical axis</td>\n<td>Select \"Count\" function</td>\n</tr>\n<tr>\n<td>Vertical axis</td>\n<td>Select \"Record\" field</td>\n</tr>\n</tbody>\n</table>\n<ol start=\"5\">\n<li>點擊右上方的 Save and return。</li>\n<li>我們可以檢視到 traefik 的流量統計圖了。</li>\n</ol>\n<h4>檢核點</h4>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1dd10a77cc85970bb2953041b8609225/40a97/kibana_dashboard.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.56962025316456%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAABJ0AAASdAHeZh94AAABHElEQVR42oWQu07DUAyG87S8AhIq5aKqF5rQJKRiQ2LrMzAwMTEgJqaqAwNSi1Ca27GPj+2D0qpdEK31y7KHT9bn4Ho67YzSzuWg073qD8JochdGyW2cpdn9JMmiOI2TrDeOTs7PLobj4TgdhclNGHf7k9NeHJCo+kMl6p16K8Kqqu3qvX9a4MN7E8zevh9flx9flQWoG6gqU5Q1oAN0aNtugADIogMgs8u6tnltg5dF8TwvPnNQYSJ2jsk5ZmFRtGSJycnfMCuzBsIOmUTFe68bg72GiPwHbxNUVZ2DMY62sO76xlaPwE3d/ECzbMr947YsCR+/zI5XTTXPV9SKCKsQt8MaDR+FiZwlqg2gpaIsi7IyiGgJ0CLaw/AvSJHza0k3sNoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"kibana_dashboard\"\n        title=\"\"\n        src=\"/static/1dd10a77cc85970bb2953041b8609225/f058b/kibana_dashboard.png\"\n        srcset=\"/static/1dd10a77cc85970bb2953041b8609225/c26ae/kibana_dashboard.png 158w,\n/static/1dd10a77cc85970bb2953041b8609225/6bdcf/kibana_dashboard.png 315w,\n/static/1dd10a77cc85970bb2953041b8609225/f058b/kibana_dashboard.png 630w,\n/static/1dd10a77cc85970bb2953041b8609225/40601/kibana_dashboard.png 945w,\n/static/1dd10a77cc85970bb2953041b8609225/78612/kibana_dashboard.png 1260w,\n/static/1dd10a77cc85970bb2953041b8609225/40a97/kibana_dashboard.png 1911w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2>結論</h2>\n<p>終於到了終章，在此次的系列文章中，我們非常簡易的跑過一次 ELK 相關流程，在這邊還是得叮嚀一下，記得要因應需求來進行變更，我們此次文章僅僅是 Demo 型態。</p>","frontmatter":{"title":"要不來點 ELK - Kibana","date":"2023-03-25","description":null}},"previous":{"fields":{"slug":"/elk/要不要來點 ELK - Elasticsearch/"},"frontmatter":{"title":"要不來點 ELK - Logstash(Indexer) with Elasticsearch"}},"next":{"fields":{"slug":"/development/玩玩 Completablefuture/"},"frontmatter":{"title":"玩玩 Completablefuture"}}},"pageContext":{"id":"2eaa1d4d-90a7-5a05-9b0f-9e8f9ae4c775","previousPostId":"28432f50-6862-55f8-9bc4-ce7e5a2937d8","nextPostId":"cce928c7-2e52-5191-bd4b-6acbfa8634fc"}},"staticQueryHashes":["2841359383","3257411868"],"slicesMap":{}}